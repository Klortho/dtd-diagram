<!DOCTYPE html>
<html>
  <head>
  	<title>dtd-diagram</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="dist/dtd-diagram.min.css">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/es6-promise/3.0.2/es6-promise.min.js'></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
    <script src="http://chrismaloney.org/d3-flextree/dist/d3-flextree.min.js"></script>
    <script src="dist/dtd-diagram.js"></script>
    <script>
      // Use the fragment, if present, to identify the root element
      var frag = function() {
        return window.location.hash.substr(1) || "";
      }
      var new_diagram = function() {
        var init_state = frag().split("!");
        diagram = new DtdDiagram({
          root_element: init_state[0] || null,
          event_handler: function(evt, n) {
            var d = n.diagram;
            window.history.pushState(null, null, 
              "#" + d.root.name + "!" + d.state());
          },
          initial_state: init_state[1] || null,
        });
      };
      new_diagram();
      window.onpopstate = function() {
        d3.select('#dtd-diagram').html("");
        new_diagram();
      };
    </script>
  </head>
  <body>
    <h1>dtd-diagram</h1>
    <div id='dtd-diagram' 
         data-options='{
             "dtd_json_file": "test/JATS-journalpublishing1.json",
             "tag_doc_base": "http://jatspan.org/niso/publishing-1.1d3/#p="
         }'></div>

    <a href="https://github.com/Klortho/dtd-diagram"><img 
      style="position: absolute; top: 0; right: 0; border: 0;" 
      src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67" 
      alt="Fork me on GitHub" 
      data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png"></a>
  </body>
</html>
