<!DOCTYPE html>
<html>
  <head>
  	<title>dtd-diagram</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="dtd-diagram.css">
    <script type='text/javascript' src='lib/es6-promise.js'></script>
    <script type="text/javascript" src="lib/d3.min.js"></script>
    <!-- FIXME: right now, this points to my flextree working copy. I need to
      get flextree onto jsdelivr -->
    <script src="../d3-flextree/d3-flextree.js"></script>

    <!-- The dtd-diagram library files -->
    <script src="src/DtdDiagram.js"></script>
    <script src="src/Box.js"></script>
    <script src="src/Node.js"></script>
    <script src="src/HasLabelNode.js"></script>
    <script src="src/HasQNode.js"></script>
    <script src="src/ElementNode.js"></script>
    <script src="src/AttributeNode.js"></script>
    <script src="src/ChoiceNode.js"></script>
    <script src="src/SeqNode.js"></script>
    <script src="src/OtherNode.js"></script>
    <script src="src/Canvas.js"></script>
    <script type="text/javascript">
      // Use the fragment, if present, to identify the root element
      var frag = function() {
        return window.location.hash.substr(1) || null;
      }
      var new_diagram = function() {
        diagram = new DtdDiagram({
          root_element: frag(),
          rebase_handler: function(n) {
            window.history.pushState(null, null, "#" + n.name);
          },
        });
      };
      new_diagram();
      window.onpopstate = function() {
        d3.select('#dtd-diagram').html("");
        new_diagram();
      };
    </script>
  </head>
  <body>
    <div id='dtd-diagram' 
         data-options='{
             "dtd_json_file": "examples/JATS-journalpublishing1.json",
             "tag_doc_base": "http://jatspan.org/niso/publishing-1.1d3/#p="
         }'></div>
  </body>
</html>
