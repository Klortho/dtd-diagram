<!DOCTYPE html>
<html>
  <head>
  	<title>dtd-diagram</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="dist/dtd-diagram.min.css">
    <script src='vendor/es6-promise/dist/es6-promise.min.js'></script>
    <script src="vendor/d3/d3.min.js"></script>
    <script src="vendor/d3-flextree/dist/d3-flextree.min.js"></script>
    <script src="dist/dtd-diagram.js"></script>
    <script>
      // Use the fragment, if present, to identify the root element
      var frag = function() {
        return window.location.hash.substr(1) || null;
      }
      var new_diagram = function() {
        diagram = new DtdDiagram({
          root_element: frag(),
          rebase_handler: function(n) {
            window.history.pushState(null, null, "#" + n.name);
          },
        });
      };
      new_diagram();
      window.onpopstate = function() {
        d3.select('#dtd-diagram').html("");
        new_diagram();
      };
    </script>
  </head>
  <body>
    <div id='dtd-diagram' 
         data-options='{
             "dtd_json_file": "test/JATS-journalpublishing1.json",
             "tag_doc_base": "http://jatspan.org/niso/publishing-1.1d3/#p="
         }'></div>
  </body>
</html>
